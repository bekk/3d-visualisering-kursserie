<!DOCTYPE html>
<html>
  <head>
    <title>Title</title>
    <meta charset="utf-8">
    <style>
      @import url(https://fonts.googleapis.com/css?family=Yanone+Kaffeesatz);
      @import url(https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic);
      @import url(https://fonts.googleapis.com/css?family=Ubuntu+Mono:400,700,400italic);

      body { font-family: 'Droid Serif'}
      h1, h2, h3 {
        font-family: 'Yanone Kaffeesatz';
        font-weight: normal;
      }
      .remark-slide-content { padding: 0.5rem 4rem; }
      .remark-code, .remark-inline-code { font-family: 'Ubuntu Mono'; }
      .remark-slide-content * { font-size: 16px; }
      .remark-code * { font-size: 12px; }
      .remark-slide-content img { width: 50%; margin: 1rem 0;}

      .topLeft { left: 1rem; top: 8rem }
      .topRight { right: 1rem; top: 8rem }
      .bottomLeft { left: 1rem; bottom: 1rem }
      .bottomRight { right: 1rem; bottom: 1rem }

      .left { left: 1rem; top: 16rem }
      .center { right: 38%; top: 16rem }
      .right { right: 1rem; top: 16rem }

      .topLeft img,
      .topRight img,
      .bottomLeft img, 
      .bottomRight img { width: 97.5% !important; margin: 0.1rem !important; }

      .topLeft,
      .topRight,
      .bottomLeft, 
      .bottomRight { position: fixed; width: 40%;}

      .left,
      .center,
      .right { position: fixed; width: 28%;}

      .left img,
      .center img,
      .right img { width: 97.5% !important; margin: 0.1rem !important; }

      .full * { width: 94% !important;}
    </style>
  </head>
  <body>
    <textarea id="source">

<!--

OUTLINE
=========

Hei! La oss starte.

Jeg heter Holger, og dette er Stian og Petter. Vi er fra Bekk, og det vi skal gjøre nå er å holde kurs i 3D-visualisering. Og det skal gå over 3 dager. 

Målet med det er at man skal forstå hvordan man lager 3D, og at man klarer å lage noe fett i 3D. Vi kommer til å starte rolig, og så blir det mer og mer spennende utover i serien.

Plan:
  Dag 1
    Intro til 3D-visualisering
    Intro til rammeverket three.js
    Lage kule ting i 3D

  Dag 2
    Lage enda kulere ting

  Dag 3
    Være kreativ og lage særdeles kule ting

Hva er 3D-visualisering?
  Lage et flatt bilde på skjermen, av noe som egentlig ikke er flatt

  (eksempler på webgl fra nettet)

I prinsippet:
  Starter med 3D-data: Koordinater (x, y, z), vektorer (x, y, z)
  Ender opp med 2D-koordinater (pikselposisjoner) på skjermen, og hvilken farge de pikslene skal ha

  (face-wireframe.png) + (shading1.png) + (pixels-on-screen-close.png)

Viktige konsepter i 3D-visualisering

  Vertex
    Flertall: Vertices
    Det er ytterpunktene på 3D-modellene. De er i koordinater i 3D-rommet. De lagres som lange lister av tre og tre floating point numbers (float)

    (illustrasjon med grov polyhedron med indeks på hver vertex)
    (opplisting av koordinatene til hver indeks)

  Face
    Det er en samling av tre vertices som tilsammen skal utgjøre et flatt polygon. De lagres som lister av tre og tre integers, som er indeksene til hver vertex i vertex-lista. 

    (illustrasjon med polyhedron med index på hver face)
    (opplisting av vertex-indeksene til hver face)

  Geometry
    Kalles også surface, mesh, model
    Dette er en samling av en liste med vertices og en liste med faces som tilsammen skal bli en figur.

    (ring rundt polyhedronet og ring rundt de to listene)

  Material og shading
    Dette definerer fargen til hver piksel som tilhører en face
    Det gjøres som regel ved å lagre fargeverdier, refleksjonsstyrke, lysstyrke og så videre, og så la en kode regne ut fargen basert på det.

    (shadertypes.png)

  Kamera
    Dette er "øyet som ser" i 3D-scenen. Det lagres som mange koordinater og vektorer som f.eks. 
      posisjon i rommet
      retning man ser
      høyde og bredde på utsnittet man ser
      hvor stor field-of-view man ser (fish eye vs kikkert)

    (illustrasjon med three-camera-helper)

  Lys
    Disse brukes i utregningene for å finne fargene til pikslene. Lagres som f.eks.
      posisjon
      lysretning
      lysstyrke og -farge

    (illustrasjon med three-light-helper)

  Scene graph
    Hierarki av objekter som tilsammen er innholdet i 3D-scenen. Lagres som en trestruktur av alle meshes, lights og andre ting som har en plassering i rommet. Gjør det veldig praktisk å flytte rundt eller rotere flere deler som hører sammen.

    (illustrasjon av trestruktur av scene -> mann + light -> hode + arm + ben)

  Rendering
    Hele prosessen å lage 2D-bildet av 3D-scenen og vise det på skjermen. Må typisk gjøres 60 ganger i sekundet for å få helt jevn bevegelse. Mellom hver rendering kan man bevege på objektene og endre parametre for å animere, slik som stop motion.

    Består av to viktige steg:
      Projisering
        Beregn 2D-posisjonen til alle vertices på skjermen
      Rasterisering
        Fargelegg pikslene til hver face på skjermen

    (projection1.png) + (projection4.png) + (rasterization4.png)

  Hardware
    I motsetning til hverdagslig programmering i Java og JavaScript må vi i større grad forholde oss til hvordan hardwaren er bygd opp. Spesielt for å oppnå god ytelse.

    - Tar forholdvis lang tid å sende data til GPU (60 fps)
    - GPU har MASSIV parallellitet gjennom tusenvis av kjerner

    (hardware.png)
    (cpu-vs-gpu.png)

-->


3D-visualisering
================

// Vi brukte ca 45 minutter på våre første slides

// TODO: Gjør mye mer pedagogisk og ikke så lavnivås
// TODO: Ta med shader pipelinemodellen fra oppgaveteksten?
// TODO: Forbered en muntlig tekst

// TODO: Hold introen ukonkret! Folk ble litt overvelmet over å ikke huske alle detaljer

// TODO: Projiseringsslidene må være mer steg for steg
// TODO: Forklar ordentlig vertices, faces og geometri
// TODO: Forklar koordinatsystemet, og hvilken koordinat kamera må væfre i forhold til et objekt
// TODO: Trenger ikke data-sliden med den lange lista, siden Stian har en del om de samme tingene

// TODO: Legg til eksempler på hva man gjøre i webgl

.topLeft[![altxt](./img/transformers.png)]
.topRight[![altxt](./img/rainbow-fart.png)]
.bottomLeft[![altxt](./img/southpark.png)]
.bottomRight[![altxt](./img/doom.jpg)]

---

# Fra modell til bilde

.topLeft[![altxt](./img/face-wireframe.png)]
.topRight[![altxt](./img/avatar.png)]

.bottomLeft[![altxt](./img/coordinates.png)]
.bottomRight[![altxt](./img/pixels-on-screen-close.jpg)]

---

1. Data
  - Modeller
  - Kameraposisjon
  - Lysposisjon
  - Farger
  - ++
2. Magic
  - Projisering
  - Rasterisering
3. Bilder på skjermen

---

<!--

# Data

- Vertices
  - (bilde av vertice-koordinater som tall)
  - (bilde av vertices som punkter)
- Faces
  - (bilde av vertex-index-vektorer som tall)
  - (bilde av faces som wireframe-polygoner)
- Vertices + Faces = Geometry
  - (bilde)
- Farger og teksturer
  - (bilde med rgba-vektorer som tall både 0.0-1.0 og 0-255)
  - (bilde av teksturmap med rgba-verdier inni pikslene)
- Posisjoner og rotasjoner
  - (bilde av eksempler på objekts posisjoner med posisjonsvektorer)
  - (bilde av rotert objekt med rotasjonsvektorene)
- Kamera
  - (bilde med posisjon, retnings-vektor og formfaktor på bilderektangel)
- Lys
  - (bilde med lystype punktlys, posisjon, lysstyrke)
  - (bilde med lystype directional, retning, lysstyrke)

---  -->

# Projisering

![altxt](./img/projection1.png)

---

# Projisering

.left[![altxt](./img/projection2.png)]
.center[![altxt](./img/projection3.png)]
.right[![altxt](./img/projection4.png)]

---

<!-- 

# Rasterisering

(Pipeline fra projection4 til rasterization3 til fullfarget trekant)

(Kanskje droppe denne sliden?)

--- -->

# Rasterisering

.topLeft[![altxt](./img/rasterization1.png)]
.topRight[![altxt](./img/rasterization2.png)]
.bottomLeft[![altxt](./img/rasterization3.png)]
.bottomRight[![altxt](./img/rasterization4.png)]

---

# Rasterisering


.full[![altxt](./img/shadertypes.png)]

<!-- TODO: Bytt ut med et bilde jeg lager selv -->
<!-- (bilde med samme modell i wireframe, solid color, flat shading, diffuse shading, fancy shading m/ fresnel+reflection map++) -->

---

# Shading

![altxt](./img/shading1.png)

---

# Shading

.left[![altxt](./img/shading2.png)]
.center[![altxt](./img/shading3.png)]
.right[![altxt](./img/shading4.png)]

---

# Hardware

.full[![altxt](./img/hardware.png)]

Hardware påvirker hvordan vi skriver koden

- Tar forholdvis lang tid å sende data til GPU (60 fps)
- GPU har MASSIV parallellitet gjennom tusenvis av kjerner

    </textarea>
    <script src="https://remarkjs.com/downloads/remark-latest.min.js"> </script>
    <script>var slideshow = remark.create();</script>
  </body>
</html>

